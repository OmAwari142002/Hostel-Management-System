<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <title>Signup</title>
    <!-- <link
      data-n-head="1"
      rel="icon"
      type="image/x-icon"
      href="https://delhivery.com/favicon.png"
    /> -->
    <style>
      body {
        font-family: "Open Sans", Arial, sans-serif;
        line-height: 1.5;
        font-size: 16px;
        color: #848484;
        background-color: #f0f0f0;
        padding: 0;
        margin: 0;
      }

      .container {
        max-width: 400px;
        margin: 100px auto;
        padding: 20px;
        background-color: #ffffff;
        box-shadow: -4px 7px 46px 2px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
      }

      .container h2 {
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 24px;
        margin: 0 0 30px 0;
        color: #000000;
      }

      .form-control {
        margin-bottom: 20px;
        position: relative;
      }

      .form-control label {
        font-weight: 300;
        font-size: 14px;
      }

      .form-control input {
        width: calc(100% - 30px);
        padding: 15px;
        border: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 0;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        -o-box-shadow: none;
        box-shadow: none;
        -webkit-border-radius: 0;
        -moz-border-radius: 0;
        -ms-border-radius: 0;
        border-radius: 0;
        -moz-transition: all 0.3s ease;
        -o-transition: all 0.3s ease;
        -webkit-transition: all 0.3s ease;
        -ms-transition: all 0.3s ease;
        transition: all 0.3s ease;
      }

      .form-control input:focus,
      .form-control input:active {
        border-bottom: 1px solid rgba(0, 0, 0, 0.4);
      }

      .btn-success {
        width: 100%;
        padding: 15px;
        background: #ed3237;
        color: #ffffff;
        border: none;
        border-radius: 0;
        -webkit-box-shadow: -2px 10px 20px -1px rgba(237, 60, 173, 0.4);
        -moz-box-shadow: -2px 10px 20px -1px rgba(237, 60, 173, 0.4);
        -o-box-shadow: -2px 10px 20px -1px rgba(237, 60, 173, 0.4);
        box-shadow: -2px 10px 20px -1px rgba(237, 60, 173, 0.4);
        cursor: pointer;
      }

      .btn-success:hover,
      .btn-success:focus,
      .btn-success:active {
        background: #ff4d4d !important;
        outline: none;
      }

      .signup-btn {
        text-align: center;
        margin-top: 10px;
      }

      .signup-btn a {
        text-decoration: none;
        color: #333;
        font-weight: bold;
      }
      .toggle-password {
        cursor: pointer;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        right: 0;
        padding: 10px;
      }
      /* Add this style to your existing styles */
      .custom-select {
        width: calc(100% - 10px);
        padding: 15px;
        border: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 0;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        -o-box-shadow: none;
        box-shadow: none;
        -webkit-border-radius: 0;
        -moz-border-radius: 0;
        -ms-border-radius: 0;
        border-radius: 0;
        -moz-transition: all 0.3s ease;
        -o-transition: all 0.3s ease;
        -webkit-transition: all 0.3s ease;
        -ms-transition: all 0.3s ease;
        transition: all 0.3s ease;
      }

      .custom-select:focus,
      .custom-select:active {
        border-bottom: 1px solid rgba(0, 0, 0, 0.4);
      }
      .custom-select:hover {
        cursor: pointer;
      }
      .custom-select option {
        background-color: #f8f8f8;
        color: #333;
        font-size: 16px;
        padding: 12px 15px;
        transition: background-color 0.3s ease;
      }

      .custom-select option:hover {
        background-color: #e0e0e0;
        color: #333;
      }
      .custom-select::after {
        content: "\25BC"; /* Unicode character for dropdown arrow */
        font-size: 14px;
        color: #000000;
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
      }
     

 /* Add this style to your existing styles */
.tab-buttons-container {
  display: flex;
  justify-content: center;
  margin-top: 20px;
  transition: margin 0.3s ease; /* Add transition to the margin property */
}

.tab-button {
  position: relative;
  background-color: #f0f0f0;
  border: none;
  color: #000;
  padding: 10px 20px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  cursor: pointer;
  border-radius: 5px 5px 0 0;
  margin-right: 24px;
  transition: background-color 0.3s ease, color 0.3s ease; /* Add transition to background-color and color */
}

.tab-button::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 1px;
  background: #ed3237; /* Color of the dotted line */
  bottom: -5px;
  left: 0;
  border-radius: 2px;
  opacity: 0; /* Initially hidden */
  transition: opacity 0.3s ease; /* Add transition to opacity */
}

.tab-button:not(:last-child)::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 1px;
  background: #ed3237; /* Color of the dotted line */
  bottom: -5px;
  left: 0;
  border-radius: 2px;
  opacity: 0; /* Initially hidden */
  transition: opacity 0.3s ease; /* Add transition to opacity */
}

.tab-button:hover::after {
  opacity: 1; /* Show the dotted line on hover */
}

/* Style to highlight the active tab */
.active {
  background-color: #ed3237;
  color: #fff;
}


    </style>
  </head>

  <body>
    <div class="container">
      <h2>Student Registration</h2>
      {% if error %}
      <p style="color: red; font-size: 18px">{{ error }}</p>
      {% endif %}
      <div style="text-align:center; margin-top: 20px;">
        <button class="tab-button active" onclick="showTab(1)" disabled><i class="fa fa-info"></i></button>
        <button class="tab-button" onclick="showTab(2)" disabled><i class="fa fa-user"></i></button>
        <button class="tab-button" onclick="showTab(3)" disabled><i class="fa fa-home"></i></button>
        <button class="tab-button" onclick="showTab(4)" disabled><i class="fa fa-check"></i></button>
    </div>
      <form action="/verify_otp" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <section id="page1">
          <h3 style="display:flex;align-items:center;justify-content:center;margin-bottom:25px;">College Details</h3>
          <div class="form-control">
            <label for="college">Select College</label>
            <select name="college" id="college" class="college custom-select">
              <option value="">Select College</option>
              <option value="TAE">Trinity Academy of Engineering</option>
              <option value="TCOER">
                Trinity College of Engineering and Research
              </option>
              <option value="KJCOER">
                KJ College of Engineering and Research
              </option>
            </select>
            <p style="font-size: 12px; color: red" id="college_error"></p>
          </div>
          <div class="form-control">
            <label for="branch">Select Branch</label>
            <select name="branch" id="branch" class="branch custom-select">
              <option value="">Select Branch</option>
              <option value="CSE">Computer Engineering</option>
              <option value="IT">Information Technology</option>
              <option value="EnTC">EnTC</option>
              <option value="CE">Civil Engineering</option>
              <option value="ME">Mechanical Engineering</option>
            </select>
            <p style="font-size: 12px; color: red" id="branch_error"></p>
          </div>
          <div class="form-control">
            <label for="year">Select Year</label>
            <select name="year" id="year" class="year custom-select">
              <option value="">Select Year</option>
              <option value="FE">FE</option>
              <option value="SE">SE</option>
              <option value="TE">TE</option>
              <option value="BE">BE</option>
            </select>
            <p style="font-size: 12px; color: red" id="year_error"></p>
          </div>
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Next"
              onclick="handleNext(1)"
            />
          </div>
        </section>
        <section id="page2">
          <h3 style="display:flex;align-items:center;justify-content:center; margin-bottom:25px;">Student Details</h3>
          <div class="form-control">
            <label for="first_name">Student's First Name</label>
            <input type="text" id="first_name" name="first_name" required />
            <p style="font-size: 12px; color: red" id="first_name_error"></p>
          </div>
          <div class="form-control">
            <label for="last_name">Student's Last Name</label>
            <input type="text" id="last_name" name="last_name" required />
            <p style="font-size: 12px; color: red" id="last_name_error"></p>
          </div>
          <div class="form-control">
            <label for="gender">Gender</label>
            <select name="gender" id="gender" class="gender custom-select">
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="non">Non Binary</option>
              <option value="na">Prefer Not To Say</option>
            </select>
            <p style="font-size: 12px; color: red" id="gender_error"></p>
          </div>
          <div class="form-control">
            <label for="email"
              >Student's Email <i>(OTP verification will be done )</i>
            </label>
            <input type="email" id="email" name="email" required />
            <p style="font-size: 12px; color: red" id="email_error"></p>
          </div>
          <div class="form-control">
            <label for="student_mob">Student's Mobile No.</label>
            <input
              type="text"
              id="student_mob"
              name="student_mob"
              pattern="^[6-9]\d{9}$"
              required
              maxlength="10"
              minlength="10"
            />
            <p style="font-size: 12px; color: red" id="student_mob_error"></p>
          </div>
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Next"
              onclick="handleNext(2)"
            />
          </div>
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Previous"
              onclick="handleprevious(2)"
            />
          </div>
          
        </section>
        <section id="page3">
          <h3 style="display:flex;align-items:center;justify-content:center;margin-bottom:25px;">Parent/Guardian Details</h3>
          <div class="form-control">
            <label for="parent_name">Parent/Guardian Name</label>
            <input type="text" id="parent_name" name="parent_name" required />
            <p style="font-size: 12px; color: red" id="parent_name_error"></p>
          </div>
          <div class="form-control">
            <label for="parent_mob">Parent/Guardian Mobile No.</label>
            <input
              type="text"
              id="parent_mob"
              name="parent_mob"
              pattern="^[6-9]\d{9}$"
              required
              maxlength="10"
              minlength="10"
            />
            <p style="font-size: 12px; color: red" id="parent_mob_error"></p>
          </div>
          <div class="form-control">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" required />
            <p style="font-size: 12px; color: red" id="address_error"></p>
          </div>
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Next"
              onclick="handleNext(3)"
            />
          </div>
          
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Previous"
              onclick="handleprevious(3)"
            />
          </div>
          
        </section>
        <section id="page4">
          <h3 style="display:flex;align-items:center;justify-content:center;margin-bottom:25px;">Credentials</h3>
          <div class="form-control">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required />
            <p style="font-size: 12px; color: red" id="password_error"></p>
            <span class="toggle-password" onclick="togglePasswordVisibility('password')"></span>

          </div>
          <div class="form-control">
            <label for="confirm_password">Confirm Password</label>
            <input
              type="password"
              id="confirm_password"
              name="confirm_password"
              required
            />
            <p style="font-size: 12px; color: red" id="confirm_password_error"></p>
            <span class="toggle-password" onclick="togglePasswordVisibility('password')"></span>
          </div>
          <div class="form-control">
            <input type="submit" class="btn btn-success" value="Sign Up" />
          </div>
          <div class="form-control">
            <input
              type="button"
              class="btn btn-success"
              value="Previous"
              onclick="handleprevious(4)"
            />
          <br>
          <br>
          
           
          </div>
        </section>
      </form>

      <h4 class="signup-btn">Already have an account?</h4>
      <div class="signup-btn">
        <a href="login">Sign In</a>
      </div>
      <div class="signup-btn">
        <a href="/">Go Back to Home</a>
      </div>
    </div>
    <script>
      function handleprevious(number){
        showPage(number-1);
        showTab(number-1);
      }
      function showTab(tabNumber) {
        const tabs = document.querySelectorAll('.tab');
        const tabButtons = document.querySelectorAll('.tab-button');

        tabs.forEach(tab => {
            tab.style.display = 'none';
        });

        tabButtons.forEach(button => {
            button.classList.remove('active');
        });

        document.getElementById('page' + tabNumber).style.display = 'block';
        tabButtons[tabNumber - 1].classList.add('active');
    }

      function togglePasswordVisibility(inputId) {
        const passwordInput = document.getElementById(inputId);
        const icon = passwordInput.nextElementSibling;

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          icon.innerHTML = '<i class="fa fa-eye-slash"></i>';
        } else {
          passwordInput.type = "password";
          icon.innerHTML = '<i class="fa fa-eye"></i>';
        }
      }
      function showPage(pageNumber) {
        document.getElementById("page1").style.display =
            pageNumber === 1 ? "block" : "none";
        document.getElementById("page2").style.display =
            pageNumber === 2 ? "block" : "none";
        document.getElementById("page3").style.display =
            pageNumber === 3 ? "block" : "none";
        document.getElementById("page4").style.display =
            pageNumber === 4 ? "block" : "none";
    }
    
      document.addEventListener("DOMContentLoaded", () => {
        showPage(1);
        const inputFields = document.querySelectorAll(
          ".form-control input, .form-control select"
        );
        inputFields.forEach((field) => {
          field.addEventListener("input", handleFieldInteraction);
        });
      });

      function handleFieldInteraction(event) {
        // You can perform actions or validations here
        validateFields(event.target);
      }

      function handleNext(tabNumber) {
        isValid = validate(tabNumber);
        console.log(isValid);
        if (isValid) {
          showPage(tabNumber+1);
          showTab(tabNumber+1);
        } else {
          Swal.fire({
            icon: "warning",
            title: "You Missed Something....",
            text: "Kindly fill correct information in all fields.",
            position: "top",
            timer: 3000,
            timerProgressBar: true,
          });
        }
      }
      function validateFields(field) {
        field.style.border = "1px solid rgba(0, 0, 0, 0.1)";

        let fieldError = document.getElementById(`${field.id}_error`);

        if (field.value === "") {
          isValid = false;

          field.style.border = "1px solid red";
          fieldError.innerHTML = "This field is required";
        } else {
          fieldError.innerHTML = "";
        }
      }
      function validate(tabNumber) {
        let isValid = true;
        const college = document.getElementById("college");
        const branch = document.getElementById("branch");
        const year = document.getElementById("year");
        const first_name = document.getElementById("first_name");
        const last_name = document.getElementById("last_name");
        const student_mobile = document.getElementById("student_mob");
        const gender = document.getElementById("gender");
        const email = document.getElementById("email");
        const parent_name = document.getElementById("parent_name");
        const parent_mobile = document.getElementById("parent_mob");
        const address = document.getElementById("address");
        const password = document.getElementById("password");
        const confirm_password = document.getElementById("confirm_password");
        const collegeDetailfields = [
      
          college,
          branch,
          year,
          
        ];
        const studentInfoFields = [
          first_name,
          last_name,
          gender,
          email,
          student_mobile,
        ];
        const parentDetailsFields = [
          parent_name,
          parent_mobile,
          address,
        ];
        const passwordFields = [password, confirm_password];

        if(tabNumber===1){
          collegeDetailfields.forEach((field) => {
            field.style.border = "1px solid rgba(0, 0, 0, 0.1)";
          });
          collegeDetailfields.forEach((field) => {
            let fieldError = document.getElementById(`${field.id}_error`);
            if (field.value === "") {
              isValid = false;
              // Mark the empty field with a red border
              field.style.border = "1px solid red";
              fieldError.innerHTML = "This field is required";
            } else {
              fieldError.innerHTML = "";
            }
          });
        }
        if(tabNumber===2){
          studentInfoFields.forEach((field) => {
            field.style.border = "1px solid rgba(0, 0, 0, 0.1)";
          });
          studentInfoFields.forEach((field) => {
            let fieldError = document.getElementById(`${field.id}_error`);
            if (field.value === "") {
              isValid = false;
              // Mark the empty field with a red border
              field.style.border = "1px solid red";
              fieldError.innerHTML = "This field is required";
            } else {
              fieldError.innerHTML = "";
            }
          });
        }
        if(tabNumber===3){
          parentDetailsFields.forEach((field) => {
            field.style.border = "1px solid rgba(0, 0, 0, 0.1)";
          });
          parentDetailsFields.forEach((field) => {
            let fieldError = document.getElementById(`${field.id}_error`);
            if (field.value === "") {
              isValid = false;
              // Mark the empty field with a red border
              field.style.border = "1px solid red";
              fieldError.innerHTML = "This field is required";
            } else {
              fieldError.innerHTML = "";
            }
          });
        }
        if(tabNumber===4){
          passwordFields.forEach((field) => {
            field.style.border = "1px solid rgba(0, 0, 0, 0.1)";
          });
          passwordFields.forEach((field) => {
            let fieldError = document.getElementById(`${field.id}_error`);
            if (field.value === "") {
              isValid = false;
              // Mark the empty field with a red border
              field.style.border = "1px solid red";
              fieldError.innerHTML = "This field is required";
            } else {
              fieldError.innerHTML = "";
            }
          });
        }
        /* fields.forEach((field) => {
          field.style.border = "1px solid rgba(0, 0, 0, 0.1)";
        });

        // Check if any field is empty
        fields.forEach((field) => {
          let fieldError = document.getElementById(`${field.id}_error`);
          if (field.value === "") {
            isValid = false;
            // Mark the empty field with a red border
            field.style.border = "1px solid red";
            fieldError.innerHTML = "This field is required";
          } else if (
            field.id === "student_mob" &&
            !/^[6-9]\d{9}$/.test(field.value)
          ) {
            // Check if it's the student's mobile field and the pattern doesn't match
            isValid = false;

            field.style.border = "1px solid red";
            fieldError.innerHTML =
              "Please enter a valid 10-digit mobile number starting with 6, 7, 8, or 9";
          } else {
            fieldError.innerHTML = "";
          }
        }); */
        
        

        return isValid;
      }
    </script>
  </body>
</html>
